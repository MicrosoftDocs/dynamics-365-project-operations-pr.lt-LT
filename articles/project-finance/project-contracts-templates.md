---
title: Projekto sutarčių ir projektų sinchronizavimas tiesiogiai iš „Project Service Automation“ į „Finance and Operations“
description: Šioje temoje aprašomi šablonas ir pagrindinės užduotys, kurie naudojami norint sinchronizuoti projekto sutartis ir projektus tiesiogiai iš „Microsoft Dynamics 365 Project Service Automation“ į „Dynamics 365 Finance“.
author: KimANelson
manager: AnnBe
ms.date: 09/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: 57fe4ae8-6ee9-442d-9933-d525b5415db8
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: b914a56b306639253a8cd3b7caa754da175b6df2
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 03/24/2020
ms.locfileid: "3753646"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="2adec-103">Projekto sutarčių ir projektų sinchronizavimas tiesiogiai iš „Project Service Automation“ į „Finance and Operations“</span><span class="sxs-lookup"><span data-stu-id="2adec-103">Synchronize project contracts and projects directly from Project Service Automation to Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="2adec-104">Šioje temoje aprašomi šablonas ir pagrindinės užduotys, kurie naudojami norint sinchronizuoti projekto sutartis ir projektus tiesiogiai iš „Dynamics 365 Project Service Automation“ į „Dynamics 365 Finance“.</span><span class="sxs-lookup"><span data-stu-id="2adec-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="2adec-105">Jei naudojate 7.3.0 versijos „Enterprise edition”, turite įdiegti KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="2adec-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="2adec-106">Duomenų srautas iš „Project Service Automation“ į „Finance“</span><span class="sxs-lookup"><span data-stu-id="2adec-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="2adec-107">Norėdami naudoti „Project Service Automation“ į „Finance“ integravimo sprendimą, turėtumėte susipažinti su „Dynamics 365” duomenų integravimo funkcija.</span><span class="sxs-lookup"><span data-stu-id="2adec-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="2adec-108">Naudojant „Project Service Automation“ į „Finance“ integravimo sprendimą, naudojama duomenų integravimo funkcija, sinchronizuojant duomenis „Project Service Automation“ ir „Finance“ egzemplioriuose.</span><span class="sxs-lookup"><span data-stu-id="2adec-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="2adec-109">Integravimo šablonas, kurį galima naudoti su duomenų integravimo funkcija, leidžia vykdyti duomenų apie projekto sutartis, projektų, projektų sutarčių eilučių ir projektų sutarčių eilučių etapų srautą iš „Project Service Automation“ į „Finance“.</span><span class="sxs-lookup"><span data-stu-id="2adec-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="2adec-110">Šioje iliustracijoje pavaizduota, kaip duomenys sinchronizuojami tarp „Project Service Automation“ ir „Finance“.</span><span class="sxs-lookup"><span data-stu-id="2adec-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="2adec-111">[![„Project Service Automation“ ir „Finance“ integravimo duomenų srautas](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="2adec-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="2adec-112">Šablonai ir užduotys</span><span class="sxs-lookup"><span data-stu-id="2adec-112">Templates and tasks</span></span>

<span data-ttu-id="2adec-113">Norėdami pasiekti galimus šablonus, „Microsoft Power Apps“ administravimo centre pasirinkite **Projektai**, tada viršutiniame dešiniajame kampe pasirinkite **Naujas projektas** ir viešuosius šablonus.</span><span class="sxs-lookup"><span data-stu-id="2adec-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="2adec-114">Toliau pateikiami šablonai ir pagrindinės užduotys naudojami norint sinchronizuoti projekto sutartis ir projektus iš „Project Service Automation“ į „Finance“.</span><span class="sxs-lookup"><span data-stu-id="2adec-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="2adec-115">Integravimas su „Dynamics 365 Project Service Automation” v2. x</span><span class="sxs-lookup"><span data-stu-id="2adec-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="2adec-116">**Šablono pavadinimas pasirinkus duomenų integravimą:** projektai ir sutartys (PSA į „Fin and Ops“)</span><span class="sxs-lookup"><span data-stu-id="2adec-116">**Name of the template in Data integration:** Projects and contracts (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="2adec-117">**Projekto užduočių pavadinimas:**</span><span class="sxs-lookup"><span data-stu-id="2adec-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="2adec-118">Projekto sutarčių PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-118">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="2adec-119">Projektų PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-119">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="2adec-120">Projekto sutarties eilučių PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-120">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="2adec-121">Projekto sutarties eilučių etapų PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-121">Project contract line milestones PSA to Fin and Ops</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="2adec-122">Integravimas su „Dynamics 365 Project Service Automation” v3. x</span><span class="sxs-lookup"><span data-stu-id="2adec-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="2adec-123">Programoje „Project Service Automation” yra atliktas schemų pakeitimas, turintis įtakos projekto sutarties eilutės etapo šablonui, todėl norint integruoti v3.x versijos „Project Service Automation” su „Dynamics 365”, reikia naudoti v2 versijos šabloną.</span><span class="sxs-lookup"><span data-stu-id="2adec-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="2adec-124">**Šablono pavadinimas pasirinkus duomenų integravimą:** projektai ir sutartys (PSA 3.x į „Fin and Ops“) – v2</span><span class="sxs-lookup"><span data-stu-id="2adec-124">**Name of the template in Data integration:** Projects and Contracts (PSA 3.x to Fin and Ops) - v2</span></span>
- <span data-ttu-id="2adec-125">**Projekto užduočių pavadinimas:**</span><span class="sxs-lookup"><span data-stu-id="2adec-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="2adec-126">Projekto sutarčių PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-126">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="2adec-127">Projektų PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-127">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="2adec-128">Projekto sutarties eilučių PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-128">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="2adec-129">Projekto sutarties eilučių etapų PSA į „Fin and Ops“</span><span class="sxs-lookup"><span data-stu-id="2adec-129">Project contract line milestones PSA to Fin and Ops</span></span>

<span data-ttu-id="2adec-130">Prieš atliekant projekto sutarčių ir projektų sinchronizavimą, reikia sinchronizuoti klientus.</span><span class="sxs-lookup"><span data-stu-id="2adec-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="2adec-131">Objektų rinkinys </span><span class="sxs-lookup"><span data-stu-id="2adec-131">Entity set</span></span>

| <span data-ttu-id="2adec-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="2adec-132">Project Service Automation</span></span>       | <span data-ttu-id="2adec-133">Finansai</span><span class="sxs-lookup"><span data-stu-id="2adec-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="2adec-134">Užsakymai</span><span class="sxs-lookup"><span data-stu-id="2adec-134">Orders</span></span>                           | <span data-ttu-id="2adec-135">Projekto sutarties integravimo objektas</span><span class="sxs-lookup"><span data-stu-id="2adec-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="2adec-136">Projektai</span><span class="sxs-lookup"><span data-stu-id="2adec-136">Projects</span></span>                         | <span data-ttu-id="2adec-137">Projekto integravimo objektas</span><span class="sxs-lookup"><span data-stu-id="2adec-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="2adec-138">Užsakymo eilutės</span><span class="sxs-lookup"><span data-stu-id="2adec-138">Order lines</span></span>                      | <span data-ttu-id="2adec-139">Projekto sutarties eilutės integravimo objektas</span><span class="sxs-lookup"><span data-stu-id="2adec-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="2adec-140">Projekto sutarties eilutės etapai</span><span class="sxs-lookup"><span data-stu-id="2adec-140">Project contract line milestones</span></span> | <span data-ttu-id="2adec-141">Projekto sutarties eilutės etapo integravimo objektas</span><span class="sxs-lookup"><span data-stu-id="2adec-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="2adec-142">Objekto srautas</span><span class="sxs-lookup"><span data-stu-id="2adec-142">Entity flow</span></span>

<span data-ttu-id="2adec-143">Projektų sutartys valdomos naudojant „Project Service Automation“, o sinchronizuojamos su „Finance“ kaip projektų sutartys.</span><span class="sxs-lookup"><span data-stu-id="2adec-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="2adec-144">Programoje „Finance“ galite nustatyti projekto sutarties integravimo šaltinį kaip integravimo šablono dalį.</span><span class="sxs-lookup"><span data-stu-id="2adec-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="2adec-145">Laiko ir medžiagų projektai bei fiksuotos kainos projektai valdomi naudojant „Project Service Automation“, o sinchronizuojamos su „Finance“ kaip projektai.</span><span class="sxs-lookup"><span data-stu-id="2adec-145">Time and material project and Fixed price projects are managed in Project Service Automation, and they are synchronized to Finance as projects.</span></span> <span data-ttu-id="2adec-146">Programoje „Finance“ galite nustatyti projekto integravimo šaltinį kaip šablono integravimo dalį.</span><span class="sxs-lookup"><span data-stu-id="2adec-146">As part of the template integration, you can set the integration source in Finance for the project.</span></span>

<span data-ttu-id="2adec-147">Projektų sutarčių eilutės valdomos naudojant „Project Service Automation“, o sinchronizuojamos su „Finance“ kaip projektų sutarčių atsiskaitymo taisyklės.</span><span class="sxs-lookup"><span data-stu-id="2adec-147">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="2adec-148">Jei atsiskaitymo būdas skiriasi nuo numatytojo projekto tipo, sinchronizuojant atnaujinamas sutarties eilutės projekto ir projekto grupės projekto tipas.</span><span class="sxs-lookup"><span data-stu-id="2adec-148">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="2adec-149">Projektų sutarčių eilučių etapai valdomi naudojant „Project Service Automation“, o sinchronizuojami su „Finance“ kaip projektų sutarčių atsiskaitymo taisyklių etapai.</span><span class="sxs-lookup"><span data-stu-id="2adec-149">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="2adec-150">„Project Service Automation“ į „Finance“ integravimo sprendimas</span><span class="sxs-lookup"><span data-stu-id="2adec-150">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="2adec-151">Laukas **Projekto sutarties ID** pasiekiamas puslapyje **Projekto sutartys**.</span><span class="sxs-lookup"><span data-stu-id="2adec-151">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="2adec-152">Šis laukas sukurtas kaip natūralus ir unikalus integravimo palaikymo raktas.</span><span class="sxs-lookup"><span data-stu-id="2adec-152">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="2adec-153">Jeigu sukuriama nauja projekto sutartis, o reikšmės **Projekto sutarties ID** dar nėra, ji generuojama automatiškai, naudojant numerių seką.</span><span class="sxs-lookup"><span data-stu-id="2adec-153">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="2adec-154">Reikšmę sudaro **ORD**, laipsniškai didėjanti numerių seka ir šešių simbolių sufiksas.</span><span class="sxs-lookup"><span data-stu-id="2adec-154">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="2adec-155">Štai pavyzdys: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="2adec-155">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="2adec-156">Laukas **Projekto numeris** pasiekiamas puslapyje **Projektai**.</span><span class="sxs-lookup"><span data-stu-id="2adec-156">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="2adec-157">Šis laukas sukurtas kaip natūralus ir unikalus integravimo palaikymo raktas.</span><span class="sxs-lookup"><span data-stu-id="2adec-157">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="2adec-158">Jeigu sukuriamas naujas projektas, o reikšmės **Projekto numeris** dar nėra, ji generuojama automatiškai, naudojant numerių seką.</span><span class="sxs-lookup"><span data-stu-id="2adec-158">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="2adec-159">Reikšmę sudaro **PRJ**, laipsniškai didėjanti numerių seka ir šešių simbolių sufiksas.</span><span class="sxs-lookup"><span data-stu-id="2adec-159">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="2adec-160">Štai pavyzdys: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="2adec-160">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="2adec-161">Taikant „Project Service Automation” į „Finance” integravimo sprendimą, naujinimo scenarijus nustato esamų projektų sutarčių lauką **Projekto sutarties ID** ir esamų projektų lauką **Projekto numeris** programoje „Project Service Automation”.</span><span class="sxs-lookup"><span data-stu-id="2adec-161">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="2adec-162">Būtinosios sąlygos ir susiejimo sąranka</span><span class="sxs-lookup"><span data-stu-id="2adec-162">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="2adec-163">Prieš atliekant projekto sutarčių ir projektų sinchronizavimą, reikia sinchronizuoti klientus.</span><span class="sxs-lookup"><span data-stu-id="2adec-163">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="2adec-164">Savo ryšių rinkinyje įtraukite integravimo rakto lauko susiejimą **msdyn\_organizationalunits** į **msdyn\_name \[pavadinimas\]**.</span><span class="sxs-lookup"><span data-stu-id="2adec-164">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="2adec-165">Galbūt pirma reikės įtraukti projektą į ryšių rinkinį.</span><span class="sxs-lookup"><span data-stu-id="2adec-165">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="2adec-166">Norėdami gauti daugiau informacijos žr. [Duomenų integravimas į „Common Data Service”, skirta programoms](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="2adec-166">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="2adec-167">Savo ryšių rinkinyje įtraukite integravimo rakto lauko susiejimą **msdyn\_projects** į **msdynce\_projectnumber \[projekto numeris\]**.</span><span class="sxs-lookup"><span data-stu-id="2adec-167">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="2adec-168">Galbūt pirma reikės įtraukti projektą į ryšių rinkinį.</span><span class="sxs-lookup"><span data-stu-id="2adec-168">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="2adec-169">Norėdami gauti daugiau informacijos žr. [Duomenų integravimas į „Common Data Service”, skirta programoms](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="2adec-169">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="2adec-170">Projektų sutarčių ir projektų **SourceDataID** gali būti atnaujintas į kitą reikšmę arba pašalintas iš susiejimo.</span><span class="sxs-lookup"><span data-stu-id="2adec-170">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="2adec-171">Numatytoji šablono reikšmė yra **„Project Service Automation”**.</span><span class="sxs-lookup"><span data-stu-id="2adec-171">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="2adec-172">Susiejimas **PaymentTerms** turi būti atnaujintas, kad atspindėtų galiojančias mokėjimo sąlygas programoje „Finance”.</span><span class="sxs-lookup"><span data-stu-id="2adec-172">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="2adec-173">Taip pat galite pašalinti susiejimą iš projekto užduoties.</span><span class="sxs-lookup"><span data-stu-id="2adec-173">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="2adec-174">Numatytosios reikšmės struktūroje yra numatytosios demonstracinių duomenų reikšmės.</span><span class="sxs-lookup"><span data-stu-id="2adec-174">The default value map has default values for demo data.</span></span> <span data-ttu-id="2adec-175">Šioje lentelėje pateikiamos „Project Service Automation” esančios reikšmės.</span><span class="sxs-lookup"><span data-stu-id="2adec-175">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="2adec-176">Vertė</span><span class="sxs-lookup"><span data-stu-id="2adec-176">Value</span></span> | <span data-ttu-id="2adec-177">Aprašo</span><span class="sxs-lookup"><span data-stu-id="2adec-177">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="2adec-178">1</span><span class="sxs-lookup"><span data-stu-id="2adec-178">1</span></span>     | <span data-ttu-id="2adec-179">Apmokėjimas per 30 dienų</span><span class="sxs-lookup"><span data-stu-id="2adec-179">Net 30</span></span>        |
    | <span data-ttu-id="2adec-180">2</span><span class="sxs-lookup"><span data-stu-id="2adec-180">2</span></span>     | <span data-ttu-id="2adec-181">Apmok.per 30 d., apmok.per 10 d.taik.2% nuol.</span><span class="sxs-lookup"><span data-stu-id="2adec-181">2% 10, Net 30</span></span> |
    | <span data-ttu-id="2adec-182">3</span><span class="sxs-lookup"><span data-stu-id="2adec-182">3</span></span>     | <span data-ttu-id="2adec-183">Apmokėjimas per 45 dienas</span><span class="sxs-lookup"><span data-stu-id="2adec-183">Net 45</span></span>        |
    | <span data-ttu-id="2adec-184">4</span><span class="sxs-lookup"><span data-stu-id="2adec-184">4</span></span>     | <span data-ttu-id="2adec-185">Apmokėjimas per 60 dienų</span><span class="sxs-lookup"><span data-stu-id="2adec-185">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="2adec-186">„Power Query“</span><span class="sxs-lookup"><span data-stu-id="2adec-186">Power Query</span></span>

<span data-ttu-id="2adec-187">Norėdami filtruoti duomenis, jei patenkinamos toliau pateikiamos sąlygos, turite naudoti „Microsoft Power Query for Excel“.</span><span class="sxs-lookup"><span data-stu-id="2adec-187">You must use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="2adec-188">Programoje „Dynamics 365 Sales” turite pardavimo užsakymų.</span><span class="sxs-lookup"><span data-stu-id="2adec-188">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="2adec-189">Programoje „Project Service Automation” turite kelis organizacijos vienetus ir šie organizaciniai vienetai bus susiejami su keliais juridiniais subjektais programoje „Finance”.</span><span class="sxs-lookup"><span data-stu-id="2adec-189">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="2adec-190">Jei reikia naudoti „Power Query“, vadovaukitės toliau pateikiamais nurodymais.</span><span class="sxs-lookup"><span data-stu-id="2adec-190">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="2adec-191">Projektų ir sutarčių (PSA į „Fin and Ops“) šablone yra numatytasis filtras, kuriame yra tik **Darbo elemento (msdyn\_ordertype = 192350001)** tipo pardavimo užsakymai.</span><span class="sxs-lookup"><span data-stu-id="2adec-191">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="2adec-192">Šis filtras padeda užtikrinti, kad nebūtų kuriamos projektų sutartys, skirtos pardavimo užsakymams programoje „Finance”.</span><span class="sxs-lookup"><span data-stu-id="2adec-192">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="2adec-193">Kurdami savo šabloną, turite įtraukti šį filtrą.</span><span class="sxs-lookup"><span data-stu-id="2adec-193">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="2adec-194">Turite sukurti „Power Query” filtrą, kuriame būtų tik tos sutarčių organizacijos, kurias reikia sinchronizuoti su integravimo ryšių rinkinio juridiniu subjektu.</span><span class="sxs-lookup"><span data-stu-id="2adec-194">You must create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="2adec-195">Pavyzdžiui, projektų sutartys, kurias turite sudarę su sutarčių organizacijos vienetu „Contoso“, JAV, turi būti sinchronizuojamos su USSI juridiniu subjektu, o projektų sutartys, kurias turite sudarę su sutarčių organizacijos vienetu „Contoso Global“, turi būti sinchronizuojamos su USMF juridiniu subjektu.</span><span class="sxs-lookup"><span data-stu-id="2adec-195">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="2adec-196">Jei neįtrauksite šio filtro į užduočių susiejimą, visos projektų sutartys bus sinchronizuojamos su juridiniu subjektu, nustatytu ryšio rinkiniui, neatsižvelgiant į sutarties organizacijos vienetą.</span><span class="sxs-lookup"><span data-stu-id="2adec-196">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="2adec-197">Šablonų susiejimas pasirinkus Duomenų integravimas</span><span class="sxs-lookup"><span data-stu-id="2adec-197">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="2adec-198">Laukai **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState** ir **AddressZipCode** neįtraukti į projektų sutarčių numatytąjį susiejimą.</span><span class="sxs-lookup"><span data-stu-id="2adec-198">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="2adec-199">Jei reikia, kad šie duomenys būtų sinchronizuojami su projektų sutartimis, galite įtraukti šiuos susiejimus.</span><span class="sxs-lookup"><span data-stu-id="2adec-199">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="2adec-200">Laukai **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** ir **ProjectType** neįtraukti į projektų numatytąjį susiejimą.</span><span class="sxs-lookup"><span data-stu-id="2adec-200">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="2adec-201">Jei reikia, kad šie duomenys būtų sinchronizuojami su projektais, galite įtraukti šiuos susiejimus.</span><span class="sxs-lookup"><span data-stu-id="2adec-201">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="2adec-202">Šiose iliustracijose pateikiami duomenų integravimo šablonų užduočių susiejimų pavyzdžiai.</span><span class="sxs-lookup"><span data-stu-id="2adec-202">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="2adec-203">Susiejime rodoma lauko informacija, kuri bus sinchronizuojama iš „Project Service Automation“ į „Finance“.</span><span class="sxs-lookup"><span data-stu-id="2adec-203">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="2adec-204">[![Šablonų susiejimas](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="2adec-204">[![Template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="2adec-205">[![Šablonų susiejimas](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="2adec-205">[![Template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="2adec-206">[![Šablonų susiejimas](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="2adec-206">[![Template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="2adec-207">[![Šablonų susiejimas](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="2adec-207">[![Template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="2adec-208">Projekto sutarties eilutės etapo susiejimas projektų ir sutarčių dalyje (PSA 3.x į „Dynamics”) – v2 šablonas.</span><span class="sxs-lookup"><span data-stu-id="2adec-208">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="2adec-209">[![Šablonų susiejimas](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="2adec-209">[![Template mapping](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
